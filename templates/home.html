{% extends 'base.html' %}
{% load static %}

{% block content %}

<header class="hero-header">
    <div class="hero-content">
        <div>
            <h1 class="hero-title">Tu estilo,<br>tu tiempo.</h1>
            <p class="hero-subtitle">Reserva en los mejores salones de belleza y barberÃ­as.</p>
        </div>
        
        <div class="search-container">
            <i class="fas fa-map-marker-alt" style="color: var(--primary); padding-left: 15px;"></i>
            <select id="city-selector" class="city-select" onchange="location = this.value ? '?city=' + this.value : '/';">
                <option value="">ðŸŒŽ Todas las ciudades</option>
                {% for s in ciudades %} 
                    <option value="{{ s }}" {% if request.GET.city == s %}selected{% endif %}>{{ s }}</option>
                {% endfor %}
            </select>
            <button class="btn-access" style="border-radius: 50px; margin: 5px;">Buscar</button>
        </div>
    </div>
</header>

<div class="grid-wrapper">

    {% if not salones %}
        <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #64748b;">
            <i class="fas fa-store-slash" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;"></i>
            <h3>No encontramos negocios</h3>
            <p>Intenta seleccionar otra ciudad o ver todos.</p>
            <a href="{% url 'home' %}" class="btn-access" style="margin-top: 15px;">Ver todos</a>
        </div>
    {% endif %}

    {% for salon in salones %}
        <a href="{% url 'salon_detail' salon.slug %}" class="salon-card">
            
            <div class="card-header">
                <div class="salon-avatar">
                    {% if salon.logo %}
                        <img src="{{ salon.logo.url }}" style="width:100%; height:100%; object-fit:cover;">
                    {% else %}
                        {{ salon.name|slice:":1"|upper }}
                    {% endif %}
                </div>
                
                <div class="salon-info">
                    <h3>{{ salon.name }}</h3>
                    <span>{{ salon.city }}</span>
                </div>
            </div>
            
            <div class="address">
                <i class="fas fa-map-pin"></i> {{ salon.address|default:"UbicaciÃ³n no especificada" }}
            </div>
            
            <div style="display:flex; justify-content: space-between; align-items: center; margin-top: auto;">
                <div class="status-pill {% if salon.is_open %}open{% else %}closed{% endif %}">
                    {% if salon.is_open %}ABIERTO{% else %}CERRADO{% endif %}
                </div>
                <i class="fas fa-chevron-right" style="color: #cbd5e1;"></i>
            </div>
        </a>
    {% endfor %}
</div>

{% endblock %}