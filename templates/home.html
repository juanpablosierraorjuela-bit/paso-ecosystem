{% extends 'base.html' %}

{% block content %}
<header class="hero-header">
    <div class="hero-content">
        <h1 class="hero-title">Tu estilo,<br><span class="highlight">tu tiempo.</span></h1>
        <p class="hero-subtitle">Descubre los mejores salones y barberÃ­as cerca de ti.<br>Reserva al instante, sin llamadas.</p>
        
        <a href="#" class="btn-legado"><i class="fas fa-book-open"></i> Nuestra Historia</a>
        
        <div class="search-container">
            <div class="input-wrapper">
                <i class="fas fa-map-marker-alt input-icon"></i>
                <select id="city-selector" class="city-select">
                    <option value="">ðŸŒŽ Ver todas las ciudades</option>
                    {% for s in salons %}
                        <option value="{{ s.city }}">{{ s.city }}</option>
                    {% endfor %}
                </select>
            </div>

            <button class="btn-geo" title="Buscar locales a menos de 600m">
                <div class="pulse-ring"></div>
                <i class="fas fa-location-arrow"></i>
                <span>Cerca de mÃ­</span>
            </button>
        </div>
    </div>
</header>

<div class="grid-wrapper">
    {% for salon in salons %}
        <a href="{% url 'salon_detail' salon.slug %}" class="salon-card">
            <div class="card-header">
                <div class="salon-avatar">
                    {% if salon.logo %}
                        <img src="{{ salon.logo.url }}" style="width:100%; height:100%; border-radius:18px; object-fit:cover;">
                    {% else %}
                        {{ salon.name|slice:":1"|upper }}
                    {% endif %}
                </div>
                <div class="salon-info">
                    <h3>{{ salon.name }}</h3>
                    <span>{{ salon.city }}</span>
                </div>
            </div>
            
            <p class="address"><i class="fas fa-map-marker-alt"></i> {{ salon.address }}</p>
            
            {% if salon.instagram or salon.facebook %}
            <div class="social-row" onclick="event.stopPropagation();"> 
                {% if salon.instagram %} <object><a href="{{ salon.instagram }}" target="_blank" class="social-icon instagram"><i class="fab fa-instagram"></i></a></object> {% endif %}
                {% if salon.facebook %} <object><a href="{{ salon.facebook }}" target="_blank" class="social-icon facebook"><i class="fab fa-facebook-f"></i></a></object> {% endif %}
            </div>
            {% endif %}

            <div style="display:flex; justify-content: space-between; align-items: center; margin-top: 20px;">
                <div class="status-pill {% if salon.is_open %}open{% else %}closed{% endif %}">
                    {% if salon.is_open %}ABIERTO{% else %}CERRADO{% endif %}
                </div>
                <span style="font-size:1.2rem; color:#cbd5e1;">â†’</span>
            </div>
        </a>
    {% empty %}
        <div style="grid-column: 1/-1; text-align: center; padding: 60px; color: #94a3b8;">
            <div style="font-size: 3rem; margin-bottom: 20px;">â˜•</div>
            <p>No hay salones registrados aÃºn.</p>
        </div>
    {% endfor %}
</div>

<script>
    // Script simple para simular la bÃºsqueda por geolocalizaciÃ³n (funcionalidad visual)
    document.querySelector('.btn-geo').addEventListener('click', function() {
        this.classList.add('searching');
        this.querySelector('span').textContent = "Buscando...";
        
        // AquÃ­ irÃ­a tu lÃ³gica real de filtrado por 600m
        setTimeout(() => {
            this.classList.remove('searching');
            this.querySelector('span').textContent = "Cerca de mÃ­";
            alert("Buscando negocios a 600m a la redonda...");
        }, 1500);
    });
</script>
{% endblock %}