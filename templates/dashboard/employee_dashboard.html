{% extends 'base.html' %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto; padding: 40px 20px;">
    <div style="text-align: center; margin-bottom: 40px;">
        <h1 style="font-weight: 800; margin-bottom: 10px;">Panel Profesional</h1>
        <p style="color: var(--secondary);">Hola, {{ employee.name }}. Configura tu disponibilidad.</p>
    </div>

    <form method="post">
        {% csrf_token %}
        
        <div class="glass-panel" style="padding: 30px; margin-bottom: 30px;">
            <h3 style="font-weight: 800; margin-bottom: 20px;">Configuración General</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <label style="font-weight: 600; font-size: 0.9rem;">Inicio Almuerzo</label>
                    {{ settings_form.lunch_start }}
                </div>
                <div>
                    <label style="font-weight: 600; font-size: 0.9rem;">Fin Almuerzo</label>
                    {{ settings_form.lunch_end }}
                </div>
            </div>
        </div>

        <div class="salon-card">
            <h3 style="font-weight: 800; margin-bottom: 20px;">Horario Semanal</h3>
            <p style="color: var(--secondary); font-size: 0.9rem; margin-bottom: 20px;">Define tus horas de trabajo para que los clientes te reserven.</p>
            
            {{ schedule_formset.management_form }}
            <div style="display: grid; gap: 15px;">
                {% for form in schedule_formset %}
                    <div style="display: flex; align-items: center; gap: 10px; background: #f8fafc; padding: 15px; border-radius: 12px; border: 1px solid #e2e8f0;">
                        {{ form.id }}
                        <div style="font-weight: 700; width: 100px;">
                            {% if forloop.counter0 == 0 %}Lunes{% endif %}
                            {% if forloop.counter0 == 1 %}Martes{% endif %}
                            {% if forloop.counter0 == 2 %}Miércoles{% endif %}
                            {% if forloop.counter0 == 3 %}Jueves{% endif %}
                            {% if forloop.counter0 == 4 %}Viernes{% endif %}
                            {% if forloop.counter0 == 5 %}Sábado{% endif %}
                            {% if forloop.counter0 == 6 %}Domingo{% endif %}
                        </div>
                        <div style="flex: 1;">{{ form.from_hour }}</div>
                        <div style="flex: 1;">{{ form.to_hour }}</div>
                        <div style="display: flex; align-items: center; gap: 5px;">
                            {{ form.is_closed }} <span style="font-size: 0.8rem;">Cerrado</span>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>

        <div style="margin-top: 30px; text-align: center;">
            <button type="submit" class="btn-access" style="padding: 15px 40px; font-size: 1.1rem;">Guardar Cambios</button>
        </div>
    </form>
</div>
{% endblock %}