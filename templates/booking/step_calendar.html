{% extends 'master.html' %}
{% block content %}
<div class="container py-5" style="max-width: 600px;">
    <div class="text-center mb-4">
        <h2 class="fw-bold">Elige tu hora</h2>
        <p class="text-muted">Con {{ employee.name }} para {{ service.name }}</p>
    </div>

    <div class="card border-0 shadow-lg rounded-4 p-4">
        <form method="GET" class="mb-4">
            <label class="fw-bold small mb-2">Fecha</label>
            <input type="date" name="date" class="form-control form-control-lg rounded-pill" value="{{ selected_date }}" min="{{ today }}" onchange="this.form.submit()">
        </form>

        <form action="{% url 'booking_step_confirm' %}" method="POST">
            {% csrf_token %}
            <h5 class="fw-bold mb-3">Horarios Disponibles</h5>
            <div class="row g-2">
                {% for slot in slots %}
                <div class="col-4 col-md-3">
                    <input type="radio" class="btn-check" name="time" id="slot_{{ slot }}" value="{{ slot }}" required>
                    <label class="btn btn-outline-dark w-100 rounded-pill py-2" for="slot_{{ slot }}">{{ slot }}</label>
                </div>
                {% empty %}
                <div class="col-12 text-center py-4 text-muted">
                    <i class="fas fa-calendar-times fs-1 mb-2"></i><br>
                    No hay cupos disponibles para esta fecha.
                </div>
                {% endfor %}
            </div>
            
            {% if slots %}
            <button type="submit" class="btn btn-dark w-100 rounded-pill py-3 mt-4 fw-bold shadow-sm">
                Confirmar Hora <i class="fas fa-arrow-right ms-2"></i>
            </button>
            {% endif %}
        </form>
    </div>
</div>
{% endblock %}
